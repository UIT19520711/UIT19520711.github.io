var xxplode = new Audio("xplode.mp3"), kickhead = new Audio("kickhead.mp3"), xxs = new Audio("hit.wav"), bossshot = new Audio("boss_shot.mp3"), audio = new Audio("thunder1.mp3"), ast = new Audio("asteroidhit1.wav"); function explodendie() { xxplode.play(), flys.style.height = "0.1px", flys.style.width = "0.1px"; var e = document.getElementById("explode"); e.style.backgroundImage = "url('shipdie.gif')", e.style.height = "200px", e.style.width = "200px", e.style.position = "absolute", e.style.backgroundSize = "contain", e.style.left = x - 50 + "px", e.style.top = fly - 50 + "px", shake(30) } var xplo = 1; function xplode() { xxplode.play(); var e = document.createElement("DIV"); document.body.appendChild(e), e.style.backgroundImage = "url('xplode" + xplo + ".gif')", e.style.height = "150px", e.style.width = "150px", e.style.position = "absolute", e.style.backgroundSize = "contain", e.style.left = posx - 20 + "px", e.style.top = posy - 75 + "px", 3 === ++xplo && (xplo = 1), setTimeout(function () { e.remove() }, 600) } function shake(e, t, o) { var s = t, l = o; document.body.style.position = "absolute"; var a = Math.floor(10 * Math.random()) + -10, n = Math.floor(10 * Math.random()) + -10; 0 === e && (a = n = 0); var h = setInterval(function () { s < a ? s++ : s > a ? s-- : s = a; l < n ? l++ : l > n ? l-- : l = n; document.body.style.left = s + "px", document.body.style.top = l + "px", s == a && l == n && (e >= 1 && shake(e - 1, s, l), clearInterval(h)) }, 1) } let highscore = 0, shiphealth = 3, bossshieldhealth = 1, bossyx = 660, bossyy = 180, posx = 630, posy = 200, thunder98 = 4, thuns = 1, jeckboss = 0, obshit = 0; document.onkeydown = myMove; var keycode, timer = 90, fly = 500, score = 0, pos = 600, shit = 0, checks = 0, allowtohit = 1; function kickedaway(e, t) { var o = 1.5, s = setInterval(function () { 0 === shiphealth && clearInterval(s); o <= 0 && (allowshiphealthtodrop = 1, clearInterval(s)); o -= .025, x += e * o, fly += t * o }, .1) } function checkbosshealth() { if (x + 50 >= bossyx && 0 === jeckboss && 1 === allowtohit && fly <= bossyy + 10 && 0 === jeckboss && 1 === allowtohit && x <= bossyx + 10 && 0 === jeckboss && 1 === allowtohit && fly + 50 >= bossyy - 5 && 0 === jeckboss && 1 === allowtohit) { kickhead.play(), kickedaway(0, 1); document.getElementById("highscore").innerHTML = ++highscore; var e = localStorage.getItem("hai"); highscore > e && localStorage.setItem("hai", highscore), document.getElementById("high").innerHTML = localStorage.getItem("hai"), 5 === highscore && 0 === jeckboss && (setInterval(thunder, 9e3), setInterval(thunder, 1e4), setInterval(thunder, 11e3), setTimeout(function () { obstacle(1) }, 7e3), setTimeout(function () { obstacle(2) }, 8e3), setTimeout(function () { obstacle(3) }, 9e3), setTimeout(function () { obstacle(4) }, 1e4), setTimeout(function () { obstacle(5) }, 11e3), setTimeout(function () { obstacle(6) }, 12e3), setTimeout(function () { obstacle(7) }, 13e3), setTimeout(function () { obstacle(8) }, 14e3)), jeckboss = 1 } x + 50 < bossyx && (jeckboss = 0), x + 50 >= posx && fly <= posy + 40 && x <= posx + 104 && fly + 50 >= posy - 5 && (fly <= posy + 40 && fly > posy && (0 === allowtohit ? (kickedaway(0, 1), 1 === allowshiphealthtodrop && (document.getElementById("score").innerHTML = --shiphealth, 0 === shiphealth ? explodendie() : xxs.play(), allowshiphealthtodrop++)) : fly = posy + 41), fly >= posy - 3 - 50 && fly + 50 < posy + 39 && (0 === allowtohit ? (kickedaway(0, -1), 1 === allowshiphealthtodrop && (document.getElementById("score").innerHTML = --shiphealth, 0 === shiphealth ? explodendie() : xxs.play(), allowshiphealthtodrop++)) : fly = posy - 3 - 50)) } function myMove() { var e = document.getElementById("spaceship"); if (function (e) { window.event && (keycode = window.event.keyCode); e && (keycode = e.which) }(), 75 === keycode && 0 === shit) if (timer < 200) { timer = 0, score = 0, shit++; var t = setInterval(a, .1) } else { shit++, timer = 0; t = setInterval(a, .1) } if (74 === keycode && 1 === shit) if (timer < 200) { timer = 0, score = 0, shit--; var o = setInterval(n, .1) } else { shit--, timer = 0; o = setInterval(n, .1) } if (0 === checks) { var s = setInterval(function () { 0 === shiphealth && clearInterval(s); score > 30 && (fly >= 550 && 0 === l ? (kickedaway(0, -6), document.getElementById("score").innerHTML = --shiphealth, shiphealth <= 0 ? explodendie() : xxs.play(), l = 1) : l = 0, fly++, fly++, e.style.top = fly + "px") }, .1); checks++ } var l = 0; function a() { 74 === keycode && clearInterval(t), pos++, pos++, ++score > 800 && (score = 400), timer++, shiphealth > 0 && fly--, fly < 0 && (fly = 0), e.style.top = fly + "px", checkbosshealth() } function n() { 75 === keycode && clearInterval(o), pos--, pos--, ++score > 800 && (score = 400), timer++, shiphealth > 0 && fly--, fly < 0 && (fly = 0), e.style.top = fly + "px", checkbosshealth() } } window.onload = boss; let ashitsound = 2; function obstacle(e) { let t = 1400, o = Math.floor(500 * Math.random()) + 1, s = Math.floor(50 * Math.random()) + 10, l = s; var a = 0, n = setInterval(function () { 0 === shiphealth && clearInterval(n); var a = document.getElementById("obs" + e); a.style.left = t + "px", a.style.top = o + "px", a.style.height = s + "px", a.style.width = l + "px", x + 30 >= t && fly <= o + s && x + 15 <= t + l && fly + 30 >= o && (obshit = 0, t = 1400 + t, o = Math.floor(300 * Math.random()) + 1, s = Math.floor(50 * Math.random()) + 10, highscore >= 10 && (s = Math.floor(100 * Math.random()) + 50), l = s, document.getElementById("score").innerHTML = --shiphealth, 0 === shiphealth ? explodendie() : xxs.play()); obshit === e && (obshit = 0, t = 1400 + t, o = Math.floor(300 * Math.random()) + 1, s = highscore >= 10 ? Math.floor(80 * Math.random()) + 40 : Math.floor(50 * Math.random()) + 10, ast.play(), ast.remove(), ast = new Audio("asteroidhit" + ashitsound + ".wav"), 4 === ++ashitsound && (ashitsound = 1), l = s); -150 == --t && (t = 1400, o = Math.floor(300 * Math.random()) + 1, s = Math.floor(50 * Math.random()) + 10, highscore >= 10 && (s = Math.floor(100 * Math.random()) + 50), l = s) }, .1); setInterval(function () { !function (e) { let t = document.getElementById("obs" + e); a += 1.5, t.style.transform = "rotate(" + a % 360 + "deg)" }(e) }, 1) } function tinhtoancackieua(e, t, o, s) { return a = (t - s) / (e - o), b = t - e * a, a } function tinhtoancackieub(e, t, o, s) { return a = (t - s) / (e - o), b = t - e * a, b } var thusound = 2; function thunder() { var e = document.createDocumentFragment(), t = document.createElement("DIV"); e.appendChild(t), document.body.appendChild(e); var o, s = document.createDocumentFragment(), l = document.createElement("DIV"); if (s.appendChild(l), document.body.appendChild(s), thunder98 > 0) switch (thunder98) { case 4: o = 5; break; case 3: o = 280; break; case 2: o = 555; break; case 1: o = 830 } else o = Math.floor(1100 * Math.random()) + 1; thunder98--, t.style.opacity = .5, t.style.width = "2px", t.style.height = "600px", t.style.position = "absolute", t.style.top = "-10px", t.style.borderLeft = "1px dashed red", t.style.left = o + 200 + "px", l.style.width = "420px", l.style.height = "600px", l.style.position = "absolute", l.style.top = "4px", setTimeout(function () { audio.play(), audio.remove(), audio = new Audio("thunder" + thusound + ".mp3"), 5 == ++thusound && (thusound = 1); shake(20), x + 50 >= o + 170 && x <= o + 260 && (document.getElementById("score").innerHTML = --shiphealth, shiphealth > 0 && xxs.play()); 0 === shiphealth && explodendie(); var e = document.createDocumentFragment(), s = document.createElement("DIV"); e.appendChild(s), document.body.appendChild(e), s.style.width = "0px", s.style.height = "580px", s.style.position = "absolute", s.style.top = "0px", s.style.left = o + 250 + "px", s.style.boxShadow = "0px 0px 200px 25px white", l.style.left = o + "px", l.style.backgroundImage = "url('thun" + thuns + ".gif')", l.style.backgroundSize = "500px 650px", thuns++, t.remove(), setTimeout(function () { l.remove(), s.remove() }, 670), 3 === thuns && (thuns = 1) }, 3e3) } function boss() { var e = new Audio("ufo.mp3"), t = new Audio("uforun.mp3"), o = new Audio("ufodam.mp3"), s = localStorage.getItem("hai"); s >= 1 && (document.getElementById("high").innerHTML = s), document.body.style.position = "absolute", document.body.style.left = "0px", document.body.style.top = "0px"; let l = document.getElementById("boss"), a = document.getElementById("bossy"), n = document.getElementById("bosslight"), h = 3, i = 500, r = 100, d = setInterval(function () { 0 != highscore && (p(), clearInterval(d)) }, 1); function p() { t.play(), e.pause(), e.load(), o.pause(), o.load(), allowtohit = 0, bossshieldhealth <= 0 && (bossshieldhealth = 1), i = Math.floor(1100 * Math.random()) + 1, r = Math.floor(500 * Math.random()) + 1; var s = Math.floor(2 * Math.random()) + 1, d = setInterval(function () { 0 === shiphealth && clearInterval(d); l.style.backgroundImage = "url('boss.gif')", posx < x && (a.style.backgroundImage = "url('duckr.gif')"); posx >= x && (a.style.backgroundImage = "url('duckl.gif')"); if (posx === i && posy === r) { t.pause(), t.load(), e.play(), u = highscore, clearInterval(d), bossshot.play(), c(0), 0 === --h && (c(80), c(-80), h = 3); var y = setTimeout(p, 3e3), m = setInterval(function () { var t = document.getElementById("bossy"); posx < x && bossshieldhealth > 0 && (t.style.backgroundImage = "url('duckr.gif')"); posx >= x && bossshieldhealth > 0 && (t.style.backgroundImage = "url('duckl.gif')"); if (bossshieldhealth <= 0) { e.pause(), e.load(), o.play(); var t = document.getElementById("bossy"); posx < x && (t.style.backgroundImage = "url('duckdamr.png')"), posx >= x && (t.style.backgroundImage = "url('duckdaml.png')"); var s = document.getElementById("boss"); s.style.backgroundImage = "url('bossdam.png')", allowtohit = 1, clearTimeout(y); var l = setTimeout(p, 7e3); clearInterval(m); var a = setInterval(function () { highscore > u && (allowshiphealthtodrop = 5, 5 === highscore ? (allowtohit = 0, thunder(), setTimeout(thunder, 500), setTimeout(thunder, 1e3), setTimeout(thunder, 1500), setTimeout(p, 6e3)) : p(), clearInterval(a), clearTimeout(l)) }, 1); setTimeout(function () { clearInterval(a) }, 6970) } }, 1); setTimeout(function () { clearInterval(m) }, 2970) } else { if (bossyx = posx < i ? (posx += s) + 28 + s : posx === i || posx === i + 1 || posx === i - 1 ? (posx = i) + 28 : (posx -= s) + 28 - s, bossyy = posy < r ? (posy += s) - 48 + s : posy === r || posy === r + 1 || posy === r - 1 ? (posy = r) - 48 : (posy -= s) - 48 - s, bossshieldhealth <= 0) { t.pause(), t.load(), o.play(), posx < x && (a.style.backgroundImage = "url('duckdamr.png')"), posx >= x && (a.style.backgroundImage = "url('duckdaml.png')"), l.style.backgroundImage = "url('bossdam.png')"; var f = document.getElementById("bosslight"); allowtohit = 1, clearInterval(d); var g = setTimeout(p, 7e3); u = highscore; var b = setInterval(function () { f.style.left = "1500px", highscore > u && (allowshiphealthtodrop = 5, 5 === highscore ? (allowtohit = 0, thunder(), setTimeout(thunder, 500), setTimeout(thunder, 1e3), setTimeout(thunder, 1500), setTimeout(thunder, 2e3), setTimeout(p, 6e3)) : p(), clearInterval(b), clearTimeout(g)) }, 1); setTimeout(function () { clearInterval(b) }, 6970) } l.style.top = posy + "px", l.style.left = posx + "px", a.style.top = bossyy + "px", a.style.left = bossyx + "px", n.style.top = posy + "px", n.style.left = posx + 10 + "px" } }, .1); function c(e) { var t = document.createDocumentFragment(), o = document.createElement("DIV"); t.appendChild(o); let s = posx, l = posy, a = s, n = l; o.style.position = "absolute", o.style.width = "10px", o.style.height = "10px", o.style.top = l + "px", o.style.left = s + "px", o.style.backgroundColor = "#ff0000", o.style.boxShadow = "0px 0px 30px 13px #ff0000", o.style.borderRadius = "10px", document.body.appendChild(t); let h = x, i = fly + e, r = tinhtoancackieua(h, i, posx, posy), d = tinhtoancackieub(h, i, posx, posy), p = setInterval(function () { 0 === shiphealth && clearInterval(p); n <= i && a >= h && (s -= 2.5, highscore >= 20 && (s -= .75), l = r * s + d, o.style.top = l + "px", o.style.left = s + "px"); n <= i && a < h && (s += 2.5, highscore >= 20 && (s += .75), l = r * s + d, o.style.top = l + "px", o.style.left = s + "px"); n > i && a <= h && (s += 2.5, highscore >= 20 && (s += .75), l = r * s + d, o.style.top = l + "px", o.style.left = s + "px"); n > i && a > h && (s -= 2.5, highscore >= 20 && (s -= .75), l = r * s + d, o.style.top = l + "px", o.style.left = s + "px"); x + 30 >= s && fly <= l + 10 && x <= s + 10 && fly + 30 >= l && (document.getElementById("score").innerHTML = --shiphealth, c(), 0 === shiphealth ? explodendie() : xxs.play()) }, .1); function c() { clearInterval(p), o.remove() } setTimeout(c, 2100) } var u = 0 } }