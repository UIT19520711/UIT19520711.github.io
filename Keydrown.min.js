!function (e) { var t = function () { var t = { forEach: function (e, t) { var n; for (n in e) e.hasOwnProperty(n) && t(e[n], n) } }, n = t.forEach; t.getTranspose = function (e) { var t = {}; return n(e, function (e, n) { t[e] = n }), t }, t.indexOf = function (e, t) { if (e.indexOf) return e.indexOf(t); var n, o = e.length; for (n = 0; n < o; n++) if (e[n] === t) return n; return -1 }; var o = t.indexOf; return t.pushUnique = function (e, t) { return -1 === o(e, t) && (e.push(t), !0) }, t.removeValue = function (e, t) { var n = o(e, t); if (-1 !== n) return e.splice(n, 1)[0] }, t.documentOn = function (t, n) { e.addEventListener ? e.addEventListener(t, n, !1) : document.attachEvent && document.attachEvent("on" + t, n) }, t.requestAnimationFrame = e.requestAnimationFrame || e.webkitRequestAnimationFrame || e.mozRequestAnimationFrame || function (t) { e.setTimeout(t, 1e3 / 60) }, t.noop = function () { }, t }(), n = { ZERO: 48, ONE: 49, TWO: 50, THREE: 51, FOUR: 52, FIVE: 53, SIX: 54, SEVEN: 55, EIGHT: 56, NINE: 57, A: 65, B: 66, C: 67, D: 68, E: 69, F: 70, G: 71, H: 72, I: 73, J: 74, K: 75, L: 76, M: 77, N: 78, O: 79, P: 80, Q: 81, R: 82, S: 83, T: 84, U: 85, V: 86, W: 87, X: 88, Y: 89, Z: 90, ENTER: 13, SHIFT: 16, ESC: 27, SPACE: 32, LEFT: 37, UP: 38, RIGHT: 39, DOWN: 40, BACKSPACE: 8, DELETE: 46, TAB: 9, TILDE: 192 }, o = t.getTranspose(n), r = [], s = function () { "use strict"; function e(e) { this.keyCode = e, this.cachedKeypressEvent = null } function n(e, t, n, o) { n ? e[t] = n : e[t](o) } return e.prototype._downHandler = t.noop, e.prototype._upHandler = t.noop, e.prototype._pressHandler = t.noop, e.prototype.isDown = function () { return -1 !== t.indexOf(r, this.keyCode) }, e.prototype.down = function (e) { n(this, "_downHandler", e, this.cachedKeypressEvent) }, e.prototype.up = function (e, t) { n(this, "_upHandler", e, t) }, e.prototype.press = function (e, t) { this.cachedKeypressEvent = t, n(this, "_pressHandler", e, t) }, e.prototype.unbindDown = function () { this._downHandler = t.noop }, e.prototype.unbindUp = function () { this._upHandler = t.noop }, e.prototype.unbindPress = function () { this._pressHandler = t.noop }, e }(), l = function (r) { "use strict"; var l = {}; l.Key = s; var i = !1, p = Date.now ? Date.now : function () { return +new Date }, a = p(); return l.tick = function () { var e, t = r.length; for (e = 0; e < t; e++) { var n = r[e], s = o[n]; s && l[s].down() } }, l.run = function (n) { i = !0; var o = p(), r = o - a; t.requestAnimationFrame.call(e, function () { i && (l.run(n), n(r, o)) }), a = o }, l.stop = function () { i = !1 }, t.forEach(n, function (e, t) { l[t] = new s(e) }), t.documentOn("keydown", function (e) { var n = e.keyCode, s = o[n], i = t.pushUnique(r, n), p = l[s]; if (p) { var a = p.cachedKeypressEvent || {}; (a.ctrlKey || a.shiftKey || a.metaKey) && (i = !0), i && p.press(null, e) } }), t.documentOn("keyup", function (e) { var n = t.removeValue(r, e.keyCode), s = o[n]; s && l[s].up(null, e) }), t.documentOn("blur", function (e) { t.forEach(r, function (e) { var t = o[e]; t && l[t].up() }), r.length = 0 }), l }(r); "object" == typeof module && "object" == typeof module.exports ? module.exports = l : "function" == typeof define && define.amd ? define(function () { return l }) : e.kd = l }(window); var laser = new Audio("Laser_Shoot.mp3"), pickupz = new Audio("pickup.wav"), flys = document.getElementById("spaceship"), lig = document.getElementById("bosslight"), x = 705, jeck = 0, stopfriction = 0, numberofbullet = 8, allowshiphealthtodrop = 2; kd.A.down(function () { flys.style.backgroundImage = "url('spacel.gif')", flys.style.left = x + "px", (x -= 10) + 50 >= posx && fly <= posy + 39 && x <= posx + 104 && fly + 50 >= posy && x <= posx + 104 && x > posx && (0 === allowtohit ? (kickedaway(5, 0), 1 === allowshiphealthtodrop && (document.getElementById("score").innerHTML = --shiphealth, 0 === shiphealth ? explodendie() : xxs.play(), allowshiphealthtodrop++)) : x = posx + 105), checkbosshealth() }), kd.A.up(function () { if (shiphealth > 0) { var e = 1.5, t = setInterval(function () { e <= 0 && clearInterval(t); x + 60 >= posx && fly <= posy + 39 && x <= posx + 114 && fly + 50 >= posy && (e = 0); x -= e, e -= .025, flys.style.left = x + "px" }, 5) } }), kd.D.down(function () { flys.style.backgroundImage = "url('space.gif')", flys.style.left = x + "px", (x += 10) + 50 >= posx && fly <= posy + 39 && x <= posx + 104 && fly + 50 >= posy && x + 50 >= posx && x + 55 < posx + 104 && (0 === allowtohit ? (kickedaway(-5, 0), 1 === allowshiphealthtodrop && (document.getElementById("score").innerHTML = --shiphealth, 0 === shiphealth ? explodendie() : xxs.play(), allowshiphealthtodrop++)) : x = posx - 51), checkbosshealth() }), kd.D.up(function () { if (shiphealth > 0) { var e = 1.5, t = setInterval(function () { e <= 0 && clearInterval(t); x + 60 >= posx && fly <= posy + 39 && x <= posx + 114 && fly + 50 >= posy && (e = 0); x += e, e -= .025, flys.style.left = x + "px" }, 5) } }), kd.W.down(function () { switch (0 === shiphealth && (jeck = 1), jeck) { case 0: jeck = 1; var e = document.createDocumentFragment(); if (numberofbullet > 0) { var t = document.createElement("DIV"); laser.play() } document.getElementById("boss"); e.appendChild(t), t.style.position = "absolute", t.style.left = x + 23.5 + "px", t.style.top = fly + "px", t.style.width = "13px", t.style.height = "31.05px", t.style.backgroundImage = "url('bomb.gif')", t.style.backgroundSize = "contain", document.body.appendChild(e), numberofbullet--; var n = fly, o = x + 23.5, r = setInterval(function () { n -= 3, t.style.top = n + "px", o + 10 >= posx && n <= posy + 36 && o <= posx + 104 && n + 10 >= posy && (--bossshieldhealth, xplode(), lig.style.left = "1500px", shake(20, 0, 0), l()); document.getElementById("chek").innerHTML = numberofbullet; var e = document.getElementById("obs" + s), r = parseInt(e.style.left), i = parseInt(e.style.top), p = parseInt(e.style.height), a = parseInt(e.style.width); if (o + 10 >= r && n <= i + p && o + 10 <= r + a && n + 10 >= i) { obshit = s, l(); var u = Math.floor(2 * Math.random()) + 1; if (highscore >= 10 && (u = Math.floor(3 * Math.random()) + 1), 2 === u) { var c = document.createDocumentFragment(), d = document.createElement("DIV"); c.appendChild(d), d.style.position = "absolute", d.style.left = r + "px", d.style.top = i + "px", d.style.width = "10px", d.style.height = "10px", d.style.backgroundImage = "url('pickup.gif')", d.style.backgroundSize = "contain", document.body.appendChild(c); var f = setInterval(function () { i += 1, d.style.top = i + "px", r + 10 >= x && i <= fly + 50 && r <= x + 50 && i + 10 >= fly && (pickupz.play(), numberofbullet += 5, document.getElementById("chek").innerHTML = numberofbullet, h()) }, 1); function h() { clearInterval(f), d.remove() } setTimeout(h, 3e3) } } ++s > 8 && (s = 1) }, .1); setTimeout(l, 1100); var s = 1; function l() { clearInterval(r), t.remove() } } }), kd.W.up(function () { jeck = 0 }), kd.run(function () { kd.tick() });